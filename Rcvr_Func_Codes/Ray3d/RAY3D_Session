************************* RAY3D_Session *******************************************
*** Comments are in UPPER CASE and refer to the question or output immediately ****
*** above in the file                                                          ****
***********************************************************************************

ray tracer for dipping structures - Version 2004.171

Specify structure file: test.mod

FULL AND RELATIVE PATH NAMES ARE ALLOWED

List the site model? (y or n) n

  file: test.mod   model:  lyr1         3 layers 


 lyr     vp      vs     rho      h     qp      qs     strike    dip
   1     6.00    3.50    2.70   10.00    0.      0.      0.     10.00
   2     7.00    4.00    2.90   20.00    0.      0.      0.      0.  
   3     8.00    4.50    3.20    0.      0.      0.      0.      0.  

A WORD ON "LAYERS" AND "INTERFACES".  AN "INTERFACE" IS AT THE *top* OF
THE LAYER WITH THE SAME NUMBER.

STRIKE AND DIP ARE FOR THE BOTTOM OF THE LAYER.  IN THIS CASE, THE 
LAYER 1-LAYER 2 BOUNDARY IS DIPPING 10 DEGREES DUE EAST (DIP DIRECTION IS
MEASURED CLOCKWISE FROM STRIKE DIRECTION).  THIS BOUNDARY IS REFERED TO AS
INTERFACE 2 IN LATER QUESTIONS.

Specify ray param. for incident wave: .04

Back azimuth of incident ray: 0.0

P-wave (y or n) ? y

IF "NO", S-WAVE TRAVEL TIMES CAN BE CALCULATED, BUT NO AMPLITUDES
CAN BE CALCULATED FOR S-WAVES AT PRESENT.  THIS IS FAIRLY TRIVIAL TO
IMPLEMENT, BUT HAS NOT BEEN NEEDED TO DATE IN OUR RESEARCH.  IT REQUIRES
KNOWLEDGE OF THE SV/SH POLARIZATION ANGLE

Calculate any amplitudes (y or n) ? y 

IF ANSWER IS NO, JUST TRAVEL TIMES WILL BE CALCULATED AND SUMMARIZED
IN RAY3D.OUT

Pp and Ps only (y or n) ? n

IF YES, ONLY TWO PHASES WILL BE CALCULATED FOR EACH LAYER, OTHERWISE EACH LAYER
WILL HAVE THE DIRECT P, THE CONVERTED PS PHASE, AND THE 8 "PRIMARY" MULTIPLE
CONVERTED PHASES CALCULATED.

Incident p amplitude =  10.

THIS QUESTION IS LARGELY AN ARTIFACT OF THE DE-BUGGING PROCESS, BUT IT
COMES IN HANDY IF MATCHING OUTPUT FROM ANOTHER SYNTHETIC CODE.  REMEMBER,
THIS IS THE INCIDENT WAVE AMPLITUDE, NOT THE P-WAVE AMPLITUDE AT THE SURFACE.

your layer ray tracing parameters are: 

 interface  ppps  mormul 
       2     F     F
       3     F     F

THE ABOVE OUTPUT IS A SUMMARY OF PARAMETERS TO DATE.  PPPS IS TRUE IF ONLY PP
AND PS PHASES ARE TO BE CALCULATED.  MORMUL IS DESCRIBED BELOW
AN ANSWER OF "N" BELOW ALLOWS FOR A REVIEW OF THESE DEFAULTS

OK ? (y or n) n 

enter the # of interfaces to trace from (i2)
 2

A WORD ON "I2" FORMAT IS IN ORDER.  ON MOST MACHINES THESE DAYS, YOU COULD TYPE JUST
"2" INSTEAD OF " 2", BUT ON OTHERS IT MATTERS.  IT MATTERS A LOT ON THE NEXT QUESTION.
SO, MY RECOMMENDATION IS TO GET USE TO PUTTING IN THE SPACES, THEN YOU SHOULD NEVER HAVE
A PROBLEM.

enter the interface numbers (40i2)
 2 3

HERE, WE JUST PUT BOTH LAYERS BACK IN AS AN EXAMPLE, YOU COULD DO LESS.

Change PpPs options (y or n) ? n

Calculate extra multiples ? (y or n) y 

ALL MULTIPLES (STANDARD AND "EXTRA") ARE FREE SURFACE MULTIPLES, I.E.
"INTERFACE-FREE SURFACE-INTERFACE" MULTIPLES
NO "INTERFACE A-INTERFACE B-INTERFACE A" MULTIPLES CAN BE INCLUDED

enter interface numbers for extra multiple calculations (40i2)
 2

SAME INTERFACE DEFINITION, INTERFACES SPECIFIED HERE REFER TO INTERFACES
THAT NEED TO HAVE MORE FREE SURFACE MULTIPLES INCLUDED.  USUALLY, THESE
ARE HIGH VELOCITY CONTRAST NEAR-SURFACE LAYERS.

Calculate extra mults for all rays ?  n

enter only interfaces which have rays that need extra mults tacked on
 2

THE ABOVE TWO QUESTIONS ALLOW YOU TO CUSTOMIZE THE RAY SET SLIGHTLY.

NORMALLY, THERE IS NO NEED TO CALCULATE EXTRA MULTIPLES FOR ALL RAYS
THAT INTERACT WITH AN INTERFACE, JUST THOSE RAYS THAT REFLECT AND CONVERT
AT THE INTERFACE.  I USUALLY ANSWER "NO" TO THE ABOVE QUESTION AND THEN
SPECIFY THE SAME INTERFACE NUMBERS AS ENTERED TWO QUESTIONS ABOVE.  THIS IS
THE MOST CONFUSING PART OF THE PROCESS FOR NEW USERS.  RAY3D.OUT LISTING
SHOULD HELP CLARIFY THE PROCESS.  IF NOT, PLEASE FEEL FREE TO CONTACT ME.

 your layer ray tracing parameters are: 

 interface  ppps  mormul 
       2     F     T
       3     F     F

NOW, MORMUL IS TRUE FOR INTERFACE 2 SINCE EXTRA MULTIPLES ARE BEING CALCULATED
FOR THAT INTERFACE.

OK ? (y or n) y 

WHEN YOU FINALLY ANSWER "y" TO THIS QUESTION, IT MEANS "RUN THE MODEL"!

For vb => va of 3.500 =>  6.000 and qb = 0.8028
    ===>  An internal s-to-p reflection is critical 

RAY3D IS TRAINED TO FLAG ANY CRITICAL REFLECTIONS.  

BELOW, THE PARTICULAR PHASE GENERATING A WARNING MESSAGE IS
AN S-TO-P CONVERTED WAVE.  THIS WILL PRODUCE A PHASE SHIFT IN THE ARRIVAL, BUT
SHOULD NOT CAUSE PROBLEMS.  RAY3D CAN HANDLE POST-CRITICAL REFLECTIONS.

HOWEVER, RAY3D CANNOT HANDLE HEAD WAVES.  IT SIMPLY IGNORES
THIS PHASE AND ALL OTHERS GENERATED FROM THIS PHASE.  SO, IF YOU GET A MESSAGE
LIKE:  "A head wave has been generated", YOU WILL WANT TO CONSIDER IT CLOSELY.
MOST OTHER MESSAGES ARE NO PROBLEM.

FOR SEVERE MODELS, THESE MESSAGES CAN BE QUITE ABUNDANT.

IN THE OUTPUT ABOVE, vb IS THE VELOCITY OF THE RAY BEFORE INTERACTION WITH 
THE INTERFACE, va IS THE VELOCITY OF THE RAY AFTER INTERACTION.  
THIS SHOULD ALLOW IDENTIFICATION OF THE LAYER RESPONSIBLE.

Create ray3d.amps ? y

EVERYONE LOVES ray3d.amps, BUT NO ONE USES IT MUCH.  IT JUST DUMPS ALL THE PHASE TIMES
AND COMPONENT AMPLITUDES INTO A FILE.  THE FILE ISN'T USER FRIEDLY, BUT THE INFORMATION 
IS AT LEAST THERE.

 phase shifted arrivals exist

THE MESSAGE ABOVE CAN OCCUR WITHOUT THE CRITICAL REFLECTION MESSAGE.  RAY3D IS
TRAINED TO HANDLE PHASE SHIFTS, SO THIS MESSAGE IS FOR INFROMATION ONLY, IT
DOES NOT INDICATE A PROBLEM.

Save this spike ? y

THIS MAY SEEM LIKE A DUMB QUESTION, BUT SOME PEOPLE USE RAY3D FOR TRAVEL-TIME
ANALYSIS ONLY.  MOST SAY "y" TO THIS AND SAVE A SPIKE SERIES.  WHEN YOU DO,
THE NEXT SERIES OF QUESTIONS ALLOW YOU TO PICK SOME OBVIOUS PARAMETERS.

Sampling rate (sec): 0.1 

Signal duration (secs): 50.

First arrival delay: 10.

Spike output file: test

OUTPUT FILES ARE NAMED USING DEFAULT SUFFIXES WITH THE ROOT NAME INDICATED IN
THE ABOVE QUESTION.  FORTRAN-77 CONCATENATION FEATURES ARE HEAVILY EMPLOYED
THE SPIKE FILES WILL BE CALLED "test_sp.[zrt]

Spike name: test

THE ABOVE NAME IS USED IN THE SAC FILE HEADERS

Convolve w/ source function ? y

AN ANSWER OF YES TO THE ABOVE QUESTION WILL ALLOW FOR INCLUSION OF A NUMBER OF
DIFFERENT SOURCE FUNCTIONS.  I USUALLY JUST USE THE SPIKE SERIES BECAUSE I
THEN USE PROGRAM PWAVEQ TO DECONVOLVE THE SYNTHETICS BEFORE COMPARISON WITH
ANY REAL DATA.  HOWEVER .... TO OBTAIN PROPER SYNTHETICS IN THE CASE OF
DIPPING LAYERS WHERE PHASE SHIFTED ARRIVALS EXIST, YOU must CONVOLVE WITH A
SOURCE FUNCTION OR YOU DO NOT GET THE HILBERT-TRANSFORMED PART OF THE
SIGNAL.  CONVOLVING WITH A SPIKE OF AMPLITUDE 1/DT IS A GOOD METHOD.

THUS, THIS EXAMPLE IS CORRECT IN HOW RAY3D SYNTHETICS ARE
GENERATED SINCE WE DID GET A "phase shifted arrivals exist" MESSAGE.
IN THIS CASE, IT DOES NOT MATTER MUCH.  AS DIP INCREASES, IT WILL MATTER.
COMPARE THE RESULTS OF THE SPIKE AND THE SYNTH APPROACH FOR MORE SEVERE
MODELS TO SEE WHAT I MEAN.

Include 15-100 instrm response ? n
Include futterman q ? n

THESE QUESTIONS FALL UNDER THE "BLAST FROM THE PAST" CATEGORY.  IF YOU DON'T NOW
WHAT THEY MEAN, DON'T WORRY.

Synthetic output file: test
Synth name: test

THE SYNTH FILE NAMES WILL BE "test_sy.[zrt]"

Pick source wavelet (1-7,not 6) [1 is a spike]: 1
s(w) = a, s(t) = spike of amp a/dt. a= 1.

OK, NOW SOMETHING INTERESTING, SEVERAL SOURCE WAVLETS ARE AVAILABLE.  MOST PEOPLE
USE A SPIKE, WHICH IS #1.  EXPERIMENT TO FIGURE OUT THE OTHERS.

Convolve w/ source function ? n
Trace another in the same model ? (y or n) n

THESE MEANS YOU ARE DONE.  BUT, YOU COULD SAY YES AND DO MULTIPLE RUNS IN THE SAME MODEL.

Trace another in the same model ? (y or n) n
